<?xml version="1.0" encoding="utf-8"?>
<html><head><title>3D Point Residuals</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><link rel="stylesheet" type="text/css" href="../Theme/nav.css" /><link rel="stylesheet" type="text/css" href="../Theme/popupmenu.css" /><link rel="stylesheet" type="text/css" href="../Theme/lf.css" /><link rel="stylesheet" type="text/css" href="../LinksExt/C1H_HTML.css" /><link rel="stylesheet" type="text/css" href="../LinksExt/C3D User Guide.css" />
<script type="text/javascript">
//<![CDATA[



var _needIndentation = false;




//]]></script>

<script language="JavaScript" src="../linker.js" type="text/JavaScript"></script>

<script language="JavaScript" src="../special.js" type="text/JavaScript"></script>

<script language="JavaScript" src="../common.js" type="text/JavaScript"></script>

<meta name="Generator" content="ComponentOne Doc-To-Help v.2009.3.0.500" />
<meta name="D2HTheme" content="C3D v.138" />
</head>
<body onload="d2hOnLoadToolbar(event);" style="OVERFLOW: hidden; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent" relpart="../">
<script language="javascript" type="text/javascript">
//<![CDATA[



d2hTopicPreOpen();



d2hTrySyncTOC();







var prev = true;





var next = true;



if (typeof d2hInitMainThemeHandlers != "undefined")

    d2hInitMainThemeHandlers(prev, next);

d2hAdjustTopicBorders(document);    



if (typeof d2hLoadWindows != "undefined")

    d2hLoadWindows();

if (typeof d2hLoadNavUrls != "undefined")

    d2hLoadNavUrls();




//]]></script>

<div id="D2HTopicOuterBody" class="d2h_outer_topic" style="OVERFLOW: auto; HEIGHT: 100%; WIDTH: 100%; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent">
<div id="nsbanner" class="d2hNavigatorTopic">
<div id="TitleRow" class="d2h_main_titlerow" style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px">
<div style="DISPLAY: none"><a id="D2HPreviousAnchor" href="notesforprogrammersfloatingpoint3ddata1.htm"></a><a id="D2HNextAnchor" href="cameracontributionmask.htm"></a></div>
<script language="JavaScript" type="text/JavaScript">
//<![CDATA[

var USE_FLAT_BUTTONS = true;

var BTN_SELECTED = "";

var BTN_HOVER = "";

var IS_MODERN = false;

var HAS_MARGIN_CLASSIC_BORDER = false;


//]]></script>

<div id="ienav" class="d2h_main_ienav">
<table id="tblNavigator" class="D2HTopicToolbarOuter" cellspacing="0" cellpadding="0" width="100%" border="0">
  <tbody>
  <tr class="D2HTopicToolbarOuter">
    <td class="D2HTopicToolbar" align="left">
      <table class="D2HTopicToolbar" style="MARGIN-LEFT: 4px" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar">
          <td class="D2HTopicToolbar">
            <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
              <tbody>
              <tr class="D2HTopicToolbar">
                <td id="D2HBreadcrumbs" class="d2hCellTopic" nowrap="" caption=""><a target="right"><span class="D2HBreadcrumbsUnselected"><a class="d2h_breadcrumbsNormal" href="the3dpointdatasection.htm">The 3D Point Data 
                  Section</a><span class="d2h_breadcrumbsLinkSeparator"> &gt; 
                  </span><a class="d2h_breadcrumbsNormal" href="description1.htm">Description</a><span style="TEXT-DECORATION: none"> </span></span></a></td></tr></tbody></table></td>
          <td class="D2HTopicToolbar" nowrap=""><span class="D2HBreadcrumbsUnselected" style="TEXT-DECORATION: none"> </span></td></tr></tbody></table></td>
    <td class="D2HTopicToolbar" align="center">
      <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar"></tr></tbody></table></td>
    <td class="D2HTopicToolbar" align="right">
      <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar">
          <td class="D2HTopicToolbar" nowrap=""><span class="D2HEmailUnselected" style="TEXT-DECORATION: none"> </span></td>
          <td class="D2HTopicToolbar">
            <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
              <tbody>
              <tr class="D2HTopicToolbar">
                <td onclick="d2hCommand('D2HEmail')" id="D2HEmail" class="d2hCellTopic" nowrap=""><a href="javascript:void(0);"><span class="D2HEmailUnselected">Email<span style="TEXT-DECORATION: none"> </span></span></a></td></tr></tbody></table></td>
          <td class="D2HTopicToolbar" width="5" nowrap=""> </td></tr></tbody></table></td></tr></tbody></table></div></div>
<script language="javascript" type="text/javascript">
//<![CDATA[

if (typeof d2hProcessTopicNavForCSH != "undefined")

    d2hProcessTopicNavForCSH();


//]]></script>
</div>
<div id="nstext" class="d2h_main_nstext" style="PADDING-BOTTOM: 10px; PADDING-TOP: 5px; PADDING-LEFT: 22px; PADDING-RIGHT: 10px" valign="bottom">
<h3>3D Point Residuals</h3>
<p class="MsoBodyText">All 3D points recorded in the C3D file have the capability 
of recording a <a onclick="return d2hpopup(event, this.href)" id="popup_103814" href="gloss_residual.htm">residual</a> measurement value – the marker residual 
is an important number that documents the accuracy of each individual 3D 
location measurement.  Although the concepts behind the calculation of the 
<a onclick="return d2hpopup(event, this.href)" id="popup_103815" href="gloss_3dpoint.htm">3D point</a> residual are based on optical 
photogrammetry, the function of the residual measurement is to document the 
measurement accuracy so the general principals can be applied to all 3D 
measurement techniques enabling users to determine the relative accuracy of each 
measurement recorded in the file.</p>
<p class="MsoBodyText">The illustration below demonstrates the optical situation 
when two observers see a single point in 3D space.  Observer C1 measures 
the point to be in the direction C1 to D1, and observer C2 determines the point 
to be in the direction C2 to D2.  Thus, we know that the point lies 
somewhere on the line C1-D1, and that it must also lie on the line C2-D2.  
This is possible only if the point lies at the virtual intersection of the two 
rays; thus the 3D reconstruction process calculates the locations of the virtual 
intersections of rays from each observer to generate a 3D location.</p>
<p class="MsoBodyText" style="PAGE-BREAK-AFTER: avoid"><img style="HEIGHT: 136.5pt; WIDTH: 264.8pt" border="0" src="../ImagesExt/image9_24.png" alt="" /></p>
<p class="MsoCaption" style="MARGIN-LEFT: 0pt">Figure 26 – Optical point residual 
determination with two cameras.</p>
<p class="MsoBodyText">However, due to limits in the measurement precision of all 
data collection systems, the measured rays from the two observers to any single 
point will normally pass very close but may not perfectly intersect.  This 
invariably results in the measurement software making a decision about the most 
probable location for the point under observation when the rays fail to 
intersect perfectly.  For the two rays shown above, with the C2-D2 ray 
passing slightly above the C1-D1 ray in 3D space, the point location is set at 
the mid-point of the line forming the shortest distance between them.</p>
<p class="MsoBodyText">The distances from the calculated point location to each 
ray are related to the uncertainty of the point calculated location, and are 
termed the residuals for the measurement.  Generally, inaccurate 
measurements or calibration will produce large residuals although in the case of 
two-observer measurements, small residuals do not necessarily mean that the 
measurements were of high accuracy.  If the errors happen to be in the 
plane containing the two rays (containing C1-D1 and C2-D2), then small residuals 
will result no matter how large the actual errors are.  For this reason, 
three or more observer measurements are usually more reliable.  A 
three-observer measurement involves a third ray (C3-D3) which will normally pass 
in the vicinity of the intersection of the other two rays and as a result, the 
problem of determining the point’s most probable position becomes somewhat more 
complicated.</p>
<p class="MsoBodyText" style="PAGE-BREAK-AFTER: avoid"> <img style="HEIGHT: 198.8pt; WIDTH: 260.3pt" border="0" src="../ImagesExt/image9_25.png" alt="" /></p>
<p class="MsoCaption" style="MARGIN-LEFT: 0pt">Figure 27 - Point residual 
determination with three cameras.</p>
<p class="MsoBodyText">A least-squares technique should be used to calculate the 
location of a point in space such that the sum of the squares of the shortest 
distances from that point to each ray is a minimum.  This calculated point 
then represents the best estimate of the observed 3D location.  The 
individual residual components are the shortest distances (perpendiculars) from 
the calculated point to each ray.</p>
<p class="MsoBodyText">It is recommended that all application software that 
calculate 3D point coordinates should also store the average value of the 
residuals for each 3D point in each frame because this value is a useful 
indicator of the reliability of the marker location determination and provides 
both users and support personnel with vital information about the reliability of 
the calculated data locations.</p>
<p class="MsoBodyText" style="MARGIN-LEFT: 0pt">In a three-observer measurement 
the probability of obtaining an inaccurate point location with low residuals is 
quite small.  Two of the observers must have errors of exactly the right 
magnitude in both horizontal and vertical components of their ray directions if 
a three-ray intersect with very small residuals and a large error is to be 
produced.  Hence, the average residual value is a much better indicator of 
3D point location accuracy if more than two observers contribute to the 
measurement.  In general, the residuals obtained for two observer 
measurements will be smaller than those obtained from measurements made by three 
or more observers – <a onclick="return d2hpopup(event, this.href)" id="popup_103813" href="thisdoesnotimplythattwoobservermeasurementsaremoreaccurate.htm">this does 
not imply that two observer measurements are more accurate</a>.</p>
<p class="MsoBodyText">The stored 3D point residuals can also act as flags for 
modified or invalid data points.  A residual value of –1.0 is used to 
indicate that a point is invalid while a residual value of 0.0 indicates that 
the 3D point coordinate is the result of modeling calculations, interpolation, 
or filtering.  A valid 3D point residual is always a positive number, while 
a residual value of 0.0 indicates that the stored 3D values have been processed 
or manipulated in some way and are not actual measurements as all indications of 
the original physical 3D measurement accuracy have been removed.</p>
<p class="MsoBodyText">An IMU (Inertial Measurement Unit) system can measure and 
reports forces, angular rates, and orientation, using accelerometers, 
gyroscopes, and magnetometers.  When motion data is created by an IMU, or 
other markerless <a onclick="return d2hpopup(event, this.href)" id="popup_103816" href="gloss_3ddata.htm">3D data</a> collection systems, then the manufacturer’s 
software calculates virtual 3D locations using methods that mimic the original 
trigonometric calculations that generated the 3D point locations recorded in C3D 
files.  Accuracy estimations of each virtual 3D location should be recorded 
as residuals in the C3D file to document the data collection performance.</p>
<p class="MsoBodyText">The recorded 3D point residual value is data <a onclick="return d2hpopup(event, this.href)" id="popup_103817" href="gloss_trial.htm">trial</a> specific number, indicating the location 
measurement accuracy and, while residuals from different trials during a single 
data collection session may be compared, any change in the calibration, data 
collection hardware, or software calculating the residuals will affect the 
recorded values.  Regardless, residuals are essential because they document 
the accuracy of each 3D data recording session in the 3D data collection 
environment.</p></div></div></body></html>
