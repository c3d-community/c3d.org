<?xml version="1.0" encoding="utf-8"?>
<html><head><title>Diagnosing C3D problems</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><link rel="stylesheet" type="text/css" href="../Theme/nav.css" /><link rel="stylesheet" type="text/css" href="../Theme/popupmenu.css" /><link rel="stylesheet" type="text/css" href="../Theme/lf.css" /><link rel="stylesheet" type="text/css" href="../LinksExt/C1H_HTML.css" /><link rel="stylesheet" type="text/css" href="../LinksExt/C3D User Guide.css" />
<script type="text/javascript">
//<![CDATA[



var _needIndentation = false;




//]]></script>

<script language="JavaScript" src="../linker.js" type="text/JavaScript"></script>

<script language="JavaScript" src="../special.js" type="text/JavaScript"></script>

<script language="JavaScript" src="../common.js" type="text/JavaScript"></script>

<meta name="Generator" content="ComponentOne Doc-To-Help v.2009.3.0.500" />
<meta name="D2HTheme" content="C3D v.138" />
</head>
<body onload="d2hOnLoadToolbar(event);" style="OVERFLOW: hidden; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent" relpart="../">
<script language="javascript" type="text/javascript">
//<![CDATA[



d2hTopicPreOpen();



d2hTrySyncTOC();







var prev = true;





var next = true;



if (typeof d2hInitMainThemeHandlers != "undefined")

    d2hInitMainThemeHandlers(prev, next);

d2hAdjustTopicBorders(document);    



if (typeof d2hLoadWindows != "undefined")

    d2hLoadWindows();

if (typeof d2hLoadNavUrls != "undefined")

    d2hLoadNavUrls();




//]]></script>

<div id="D2HTopicOuterBody" class="d2h_outer_topic" style="OVERFLOW: auto; HEIGHT: 100%; WIDTH: 100%; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent">
<div id="nsbanner" class="d2hNavigatorTopic">
<div id="TitleRow" class="d2h_main_titlerow" style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px">
<div style="DISPLAY: none"><a id="D2HPreviousAnchor" href="troubleshootingc3dfiles.htm"></a><a id="D2HNextAnchor" href="repairingc3dfiles.htm"></a></div>
<script language="JavaScript" type="text/JavaScript">
//<![CDATA[

var USE_FLAT_BUTTONS = true;

var BTN_SELECTED = "";

var BTN_HOVER = "";

var IS_MODERN = false;

var HAS_MARGIN_CLASSIC_BORDER = false;


//]]></script>

<div id="ienav" class="d2h_main_ienav">
<table id="tblNavigator" class="D2HTopicToolbarOuter" cellspacing="0" cellpadding="0" width="100%" border="0">
  <tbody>
  <tr class="D2HTopicToolbarOuter">
    <td class="D2HTopicToolbar" align="left">
      <table class="D2HTopicToolbar" style="MARGIN-LEFT: 4px" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar">
          <td class="D2HTopicToolbar">
            <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
              <tbody>
              <tr class="D2HTopicToolbar">
                <td id="D2HBreadcrumbs" class="d2hCellTopic" nowrap="" caption=""><a target="right"><span class="D2HBreadcrumbsUnselected"><a class="d2h_breadcrumbsNormal" href="appendix.htm">Appendix</a><span class="d2h_breadcrumbsLinkSeparator"> &gt; </span><a class="d2h_breadcrumbsNormal" href="troubleshootingc3dfiles.htm">Troubleshooting C3D 
                  files</a><span style="TEXT-DECORATION: none"> </span></span></a></td></tr></tbody></table></td>
          <td class="D2HTopicToolbar" nowrap=""><span class="D2HBreadcrumbsUnselected" style="TEXT-DECORATION: none"> </span></td></tr></tbody></table></td>
    <td class="D2HTopicToolbar" align="center">
      <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar"></tr></tbody></table></td>
    <td class="D2HTopicToolbar" align="right">
      <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar">
          <td class="D2HTopicToolbar" nowrap=""><span class="D2HEmailUnselected" style="TEXT-DECORATION: none"> </span></td>
          <td class="D2HTopicToolbar">
            <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
              <tbody>
              <tr class="D2HTopicToolbar">
                <td onclick="d2hCommand('D2HEmail')" id="D2HEmail" class="d2hCellTopic" nowrap=""><a href="javascript:void(0);"><span class="D2HEmailUnselected">Email<span style="TEXT-DECORATION: none"> </span></span></a></td></tr></tbody></table></td>
          <td class="D2HTopicToolbar" width="5" nowrap=""> </td></tr></tbody></table></td></tr></tbody></table></div></div>
<script language="javascript" type="text/javascript">
//<![CDATA[

if (typeof d2hProcessTopicNavForCSH != "undefined")

    d2hProcessTopicNavForCSH();


//]]></script>
</div>
<div id="nstext" class="d2h_main_nstext" style="PADDING-BOTTOM: 10px; PADDING-TOP: 5px; PADDING-LEFT: 22px; PADDING-RIGHT: 10px" valign="bottom">
<h3>Diagnosing C3D problems</h3>
<p class="MsoBodyText">If you are having issues with C3D files then a quick 
solution may be to download Mokka and the MLSviewer, two free applications from 
the <a href="http://www.c3d.org"><span style="FONT-FAMILY: &quot;Tahoma&quot;,&quot;sans-serif&quot;">www.c3d.org</span></a> web site, and 
use them to open your C3D file.  Mokka will normally display the C3D marker 
data and analog information in a visual 3D workspace on a Windows system, while 
the MLSviewer will display the C3D structure and data contents in a format that 
makes it easy to explore both the file contents and structure.  If both 
applications succeed in opening and displaying the C3D file with problems in 
other applications then you can examine the file in detail and may be able to 
determine the cause of the problem by comparing the contents of the problem file 
with the contents of any of the test suites available from the C3D web site or 
the sample files supplied with the two viewer applications.</p>
<p class="MsoBodyText" style="MARGIN-LEFT: 0pt">All early C3D files will have less 
than 32767 frames and most applications should open these files without any 
problems.  Files created in the early 2000’s may have frame ranges from 
32767 to 65535 frames and some applications may have problems opening these 
files.  In recent years C3D files with more than 65535 frames have been 
appearing and manufacturers have invented various methods of storing the frame 
count that may not be understood by all applications.  In addition the 
increased frame count may cause internal overflow errors in some applications 
that were written for the clinical environment where data collections are 
typically less than a couple of minutes.</p>
<p class="MsoBodyText">The Mokka application (MOtion Kinetic and Kinematic 
Analyzer) is an unsupported, user written application, that can be downloaded 
from the <a href="http://www.c3d.org"><span style="FONT-FAMILY: &quot;Tahoma&quot;,&quot;sans-serif&quot;">c3d.org</span></a> web site and 
displays the C3D file contents in a graphical environment which makes it easy to 
visualize and examine the 3D and analog data contained in the C3D file.  
The Mokka graphical interface makes C3D data visualization convenient but it 
does not provide a detailed breakdown of the C3D file contents and, as a user 
written application, it is unsupported and as a result it may report “errors” 
due to some misunderstandings about the details of the C3D file format, so any 
error messages displayed by Mokka may be a result of internal Mokka 
issues.  For example when a C3D file does not contain any force plate data 
and the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">FORCE_PLATFORM:USED</span></span> parameter has been set 
0 (conforming to the C3D format) Mokka may report that the force plate location 
<a onclick="return d2hpopup(event, this.href)" id="popup_104174" href="gloss_parameters.htm">parameters</a> are missing even though the C3D file 
parameters have documented that there are no force plates.  So the “error” 
that Mokka reports may be an internal coding error, not an actual C3D file error 
in some cases.  As a result Mokka is mainly a convenient way to view the 
C3D file data and while the error logger reports may be helpful, they are not 
always accurate.</p>
<p class="MsoBodyText">Since Mokka allows the user to save the C3D file after it 
has been opened it offers both the chance to “fix” an error or create a new 
error if the file is saved.</p>
<p class="MsoBodyText" style="PAGE-BREAK-AFTER: avoid"><img style="HEIGHT: 321pt; WIDTH: 342pt" border="0" src="../ImagesExt/image9_62.jpg" alt="" /></p>
<p class="MsoCaption" style="MARGIN-LEFT: 0pt">Figure 51 - The user-written Mokka 
application can open and display C3D file contents.</p>
<p class="MsoBodyText">If you want to review the contents of the C3D file in 
detail then the MLSviewer is a good choice, it will open any C3D file format 
containing less than 32767 frames in a read-only mode to avoid any risk of 
modifying the C3D file contents.</p>
<p class="MsoBodyText">The MLSviewer displays the contents of the C3D file in a 
familiar Windows display environment, interpreting the C3D file structure and 
displaying the file contents at a parameter and data <a onclick="return d2hpopup(event, this.href)" id="popup_104177" href="gloss_section.htm">section</a> level with the ability to provide a 
detailed examination of the structure of each parameter within the C3D 
file.  If you are still having problems opening a file, but the MLSviewer 
allows you to see the file contents, then the next step is to debug the file 
contents using the details described in this C3D user guide as a reference for 
the contents and structure of the C3D file.</p>
<p class="MsoBodyText">The MLSviewer does not support C3D files with more than 
32767 3D frames and will display a message when if an attempt is made to open a 
larger C3D file.  It is a useful diagnostic tool because it does not write 
anything to the C3D file and does not modify the open C3D file in any way.</p>
<p class="MsoBodyText" style="PAGE-BREAK-AFTER: avoid"><img style="HEIGHT: 198pt; WIDTH: 342pt" border="0" src="../ImagesExt/image9_63.jpg" alt="" /></p>
<p class="MsoCaption" style="MARGIN-LEFT: 0pt">Figure 52 - The free MLSviewer 
allows a detailed examination of the C3D file structure.</p>
<p class="MsoBodyText">The C3D file format is an efficient binary format that has 
existed for a very long time.  As a result of the binary format, writing 
data to the C3D file format is a little complex and it is not uncommon for new 
application programmers to fail to understand the format detail and 
capabilities.  This can result in new applications creating C3D files that 
they can read but other applications are unable to open or open and display 
incorrect values.  If you cannot get Mokka, or the MLSviewer to open the 
file and display the contents then you can be confident that it is either 
corrupt, or not a C3D file.</p>
<p class="MsoBodyText" style="PAGE-BREAK-AFTER: avoid"><img style="HEIGHT: 114.8pt; WIDTH: 333pt" border="0" src="../ImagesExt/image9_64.png" alt="" /></p>
<p class="MsoCaption" style="MARGIN-LEFT: 0pt">Figure 53 - Reviewing the C3D file 
header can reveal the structure of a C3D file.</p>
<p class="MsoBodyText">The next option is to use a binary file hex editor to 
examine the file at a binary level – the first 512 <a onclick="return d2hpopup(event, this.href)" id="popup_104178" href="gloss_bytes.htm">bytes</a> of the file form the C3D header that defines 
the C3D file structure and is documented byte by byte in this user guide 
together with all the parameter and group formats.  As a result the C3D 
file can be examined with a binary file editor to verify the contents.</p>
<p class="MsoBodyText" style="MARGIN-LEFT: 0pt">For example, a detailed 
examination of the C3D file header record shown above at a <a onclick="return d2hpopup(event, this.href)" id="popup_104173" href="binarylevel.htm">binary level</a> enables us to verify that the parameters 
start in the second 512 byte <a onclick="return d2hpopup(event, this.href)" id="popup_104179" href="gloss_block.htm">block</a>, and the file stored data from 
twenty-six 3D points, sixteen analog channels and contains 450 frames of <a onclick="return d2hpopup(event, this.href)" id="popup_104176" href="gloss_rawdata.htm">raw data</a>, recorded at fifty frames/second with four 
samples of analog data stored with each <a onclick="return d2hpopup(event, this.href)" id="popup_104175" href="gloss_3dpoint.htm">3D point</a> frame sample.</p>
<p class="MsoBodyText">While examining a C3D file byte by byte at a binary level 
with a hex editor can be time consuming, the documentation in this user guide 
allows you to verify, and even edit if necessary, individual parameters within 
the file at a binary level and verify the internal 
structure.</p></div></div></body></html>
