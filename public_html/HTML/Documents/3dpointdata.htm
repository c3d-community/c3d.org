<?xml version="1.0" encoding="utf-8"?>
<html><head><title>3D Point Data</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><link rel="stylesheet" type="text/css" href="../Theme/nav.css" /><link rel="stylesheet" type="text/css" href="../Theme/popupmenu.css" /><link rel="stylesheet" type="text/css" href="../Theme/lf.css" /><link rel="stylesheet" type="text/css" href="../LinksExt/C1H_HTML.css" /><link rel="stylesheet" type="text/css" href="../LinksExt/C3D User Guide.css" />
<script type="text/javascript">
//<![CDATA[



var _needIndentation = false;




//]]></script>

<script language="JavaScript" src="../linker.js" type="text/JavaScript"></script>

<script language="JavaScript" src="../special.js" type="text/JavaScript"></script>

<script language="JavaScript" src="../common.js" type="text/JavaScript"></script>

<meta name="Generator" content="ComponentOne Doc-To-Help v.2009.3.0.500" />
<meta name="D2HTheme" content="C3D v.138" />
</head>
<body onload="d2hOnLoadToolbar(event);" style="OVERFLOW: hidden; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent" relpart="../">
<script language="javascript" type="text/javascript">
//<![CDATA[



d2hTopicPreOpen();



d2hTrySyncTOC();







var prev = true;





var next = true;



if (typeof d2hInitMainThemeHandlers != "undefined")

    d2hInitMainThemeHandlers(prev, next);

d2hAdjustTopicBorders(document);    



if (typeof d2hLoadWindows != "undefined")

    d2hLoadWindows();

if (typeof d2hLoadNavUrls != "undefined")

    d2hLoadNavUrls();




//]]></script>

<div id="D2HTopicOuterBody" class="d2h_outer_topic" style="OVERFLOW: auto; HEIGHT: 100%; WIDTH: 100%; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent">
<div id="nsbanner" class="d2hNavigatorTopic">
<div id="TitleRow" class="d2h_main_titlerow" style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px">
<div style="DISPLAY: none"><a id="D2HPreviousAnchor" href="scalingresolution.htm"></a><a id="D2HNextAnchor" href="analogdata.htm"></a></div>
<script language="JavaScript" type="text/JavaScript">
//<![CDATA[

var USE_FLAT_BUTTONS = true;

var BTN_SELECTED = "";

var BTN_HOVER = "";

var IS_MODERN = false;

var HAS_MARGIN_CLASSIC_BORDER = false;


//]]></script>

<div id="ienav" class="d2h_main_ienav">
<table id="tblNavigator" class="D2HTopicToolbarOuter" cellspacing="0" cellpadding="0" width="100%" border="0">
  <tbody>
  <tr class="D2HTopicToolbarOuter">
    <td class="D2HTopicToolbar" align="left">
      <table class="D2HTopicToolbar" style="MARGIN-LEFT: 4px" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar">
          <td class="D2HTopicToolbar">
            <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
              <tbody>
              <tr class="D2HTopicToolbar">
                <td id="D2HBreadcrumbs" class="d2hCellTopic" nowrap="" caption=""><a target="right"><span class="D2HBreadcrumbsUnselected"><a class="d2h_breadcrumbsNormal" href="the3dpointdatasection.htm">The 3D Point Data 
                  Section</a><span class="d2h_breadcrumbsLinkSeparator"> &gt; 
                  </span><a class="d2h_breadcrumbsNormal" href="scalingresolution.htm">Scaling Resolution</a><span style="TEXT-DECORATION: none"> </span></span></a></td></tr></tbody></table></td>
          <td class="D2HTopicToolbar" nowrap=""><span class="D2HBreadcrumbsUnselected" style="TEXT-DECORATION: none"> </span></td></tr></tbody></table></td>
    <td class="D2HTopicToolbar" align="center">
      <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar"></tr></tbody></table></td>
    <td class="D2HTopicToolbar" align="right">
      <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar">
          <td class="D2HTopicToolbar" nowrap=""><span class="D2HEmailUnselected" style="TEXT-DECORATION: none"> </span></td>
          <td class="D2HTopicToolbar">
            <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
              <tbody>
              <tr class="D2HTopicToolbar">
                <td onclick="d2hCommand('D2HEmail')" id="D2HEmail" class="d2hCellTopic" nowrap=""><a href="javascript:void(0);"><span class="D2HEmailUnselected">Email<span style="TEXT-DECORATION: none"> </span></span></a></td></tr></tbody></table></td>
          <td class="D2HTopicToolbar" width="5" nowrap=""> </td></tr></tbody></table></td></tr></tbody></table></div></div>
<script language="javascript" type="text/javascript">
//<![CDATA[

if (typeof d2hProcessTopicNavForCSH != "undefined")

    d2hProcessTopicNavForCSH();


//]]></script>
</div>
<div id="nstext" class="d2h_main_nstext" style="PADDING-BOTTOM: 10px; PADDING-TOP: 5px; PADDING-LEFT: 22px; PADDING-RIGHT: 10px" valign="bottom">
<h3>3D Point Data</h3>
<p class="MsoBodyText">In the C3D file format, <a onclick="return d2hpopup(event, this.href)" id="popup_103858" href="gloss_3dpoint.htm">3D point</a> data was originally intended to store 
marker position data within a calibrated volume.  Hence, the data would be 
homogeneous in the sense that units and relative scales of each point data item 
would be the same.  When stored in <a onclick="return d2hpopup(event, this.href)" id="popup_103859" href="gloss_integer.htm">integer</a> form, the stored 16-bit signed integer 
value must be multiplied by the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:SCALE</span></span> <a onclick="return d2hpopup(event, this.href)" id="popup_103857" href="gloss_floatingpoint1.htm">floating-point</a> scaling factor (header words 
7-8) to yield a physical world value – generally all <a onclick="return d2hpopup(event, this.href)" id="popup_103860" href="gloss_3ddata.htm">3D data</a> points locations are recorded in millimeters 
which is the default measurement unit for 3D data in C3D files.</p>
<p class="MsoBodyText">While it is possible to create C3D files that store 3D data 
measurements in meters, feet, or yards this will create compatibility problems 
for everyone as all C3D applications default to reading the 3D values in 
millimeters.  The units used in C3D file should be documented by the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:UNITS</span></span> 
parameter but note that changing this parameter from “mm” to “cm” or “m” does 
not affect the 3D data scaling.  While applications can be created to 
internally rescale the data, all C3D files must default to using millimeters for 
universal compatibility.</p>
<p class="MsoBodyText">The signed integer variable type represents an integer 
value from -32767 to +32767.  The scaling factor is dependent upon the 
calibration volume and is calculated when the data is stored such that the 
greatest precision is allowed over the entire volume of interest.</p>
<p class="MsoBodyText">For example, if the largest dimension of the calibration is 
4 meters then, assuming the calibrated volume begins at the global (0,0,0) 
reference location and contains only positive X-direction points with the 
largest dimension being X=4 meters, the scaling factor for length units 
expressed in mm would be</p>
<p class="MsoBodyText"><span style="FONT-FAMILY: &quot;Calibri&quot;,&quot;sans-serif&quot;">Scaling 
Factor = 4000 mm/32767 = 0.122 mm</span></p>
<p class="MsoBodyText"><span style="FONT-FAMILY: &quot;Calibri&quot;,&quot;sans-serif&quot;">                                    
0 .  .  .  .  .  .  .    .  
.  4000 mm</span></p>
<p class="MsoBodyText"><span style="FONT-FAMILY: &quot;Calibri&quot;,&quot;sans-serif&quot;">+-------------------------+------------------------+</span></p>
<p class="MsoBodyText"><span style="FONT-FAMILY: &quot;Calibri&quot;,&quot;sans-serif&quot;">-32767                   
   0 
                         
       +32767</span></p>
<p class="MsoBodyText">Thus the resolution of all point locations within this C3D 
file is 0.122mm. </p>
<p class="MsoBodyText">Clearly, problems can occur when the scale of the stored 
data reaches that of the scaling factor or resolution.  However, as can be 
seen from the example above, the resolution of integer data within a C3D file in 
this example is well within even the theoretical limits of most 3D motion 
measurement systems.</p>
<p class="MsoBodyText">Problems do arise when software applications change the 
interpretation of the 3D data point.  For example, software applications 
have used the 3D point data type to store the results of internal calculations 
of non-3D information (such as accelerations and moments) derived from 
calculations in software applications.  Depending on the scaling of these 
calculations, this can produce numbers that cannot be accurately represented 
with the same <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:SCALE</span></span> factor required by the 3D point 
data.</p>
<p class="MsoBodyText" style="MARGIN-LEFT: 0pt">Under these <a onclick="return d2hpopup(event, this.href)" id="popup_103856" href="circumstances.htm">circumstances</a>, moments in a system with dimensional 
units of mm and force units of N are commonly computed in units of Nmm.  
This can lead to problems for users who manipulate the 3D point data within the 
application and then store the results in an integer format C3D file.  For 
instance, users may wish to scale the above mentioned Nmm values by dividing by 
1000 to obtain the more commonly used units of Nm and then further dividing by 
the subject’s body weight for normalization to obtain units of Nm/kg.  Such 
a conversion from Nmm to either Nm or Nm/kg can easily result in values in the 
order of 1 or even 0.1 which are significant in the context of their 
biomechanical importance.</p>
<p class="MsoBodyText">When storing these values within integer 3D data variables 
using a scaling factor of 0.122, only 8 numbers (steps) would be available to 
store values between 0 and 1 and all values between 0 and 0.1 would be treated 
as 0.0 (using the example above).</p>
<p class="MsoBodyText"><span style="FONT-FAMILY: &quot;Calibri&quot;,&quot;sans-serif&quot;">0                              
1.0 
mm                                  
0                              
0.1 mm</span></p>
<p class="MsoBodyText"><span style="FONT-FAMILY: &quot;Calibri&quot;,&quot;sans-serif&quot;">+--------------------------                                           
+---------------------------</span></p>
<p class="MsoBodyText"><span style="FONT-FAMILY: &quot;Calibri&quot;,&quot;sans-serif&quot;">0                              
8 
steps                                  
0                              
1 step</span></p>
<p class="MsoBodyText">The loss of resolution during the conversion of the 
floating-point values to signed integer values, limited by the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:SCALE</span></span> 
factor, results in loss of data resolution when the results approach the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:SCALE</span></span> value 
due to bad scaling choices.</p>
<p class="MsoBodyText">Since this truncation of the data occurs when the 
floating-point values are saved to a C3D file using the integer formats, the 
loss of resolution will not be apparent until the C3D file is later 
reloaded.  It is also worth noting that floating-point data that has been 
filtered may become “noisy” if it is converted to signed integer values.  
This is due to the loss of precision during the floating-point to signed integer 
conversion process.  This is a particular problem at very low signal 
levels.</p>
<p class="MsoBodyText">There are several ways to avoid this scaling problem.  
The best solution is to always be aware of the units and the ranges of interest 
as well as the resolution of the system and to scale appropriately within any 
application that may need to generate integer formatted C3D files.  Note 
that while the format is described as “integer format” this refers to the 
storage method which scales all “integer” 3D values via a common floating-point 
scaling factor.  As a result both “integer C3D” and “floating-point C3D” 
files offer virtually identical 3D location resolution in all human biomechanics 
environments.</p>
<p class="MsoBodyText">While floating-point 3D locations can be stored in a 
floating-point formatted C3D file with a resolution of 0.293 × 10<sup>–38</sup> 
mm, it is unlikely that any 3D data collection system can measure a marker or 
sensor location to sub-atomic resolution, equivalent to the diameter of a single 
electron.</p></div></div></body></html>
