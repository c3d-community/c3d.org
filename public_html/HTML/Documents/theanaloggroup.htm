<?xml version="1.0" encoding="utf-8"?>
<html><head><title>The ANALOG group</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><link rel="stylesheet" type="text/css" href="../Theme/nav.css" /><link rel="stylesheet" type="text/css" href="../Theme/popupmenu.css" /><link rel="stylesheet" type="text/css" href="../Theme/lf.css" /><link rel="stylesheet" type="text/css" href="../LinksExt/C1H_HTML.css" /><link rel="stylesheet" type="text/css" href="../LinksExt/C3D User Guide.css" />
<script type="text/javascript">
//<![CDATA[



var _needIndentation = false;




//]]></script>

<script language="JavaScript" src="../linker.js" type="text/JavaScript"></script>

<script language="JavaScript" src="../special.js" type="text/JavaScript"></script>

<script language="JavaScript" src="../common.js" type="text/JavaScript"></script>

<meta name="Generator" content="ComponentOne Doc-To-Help v.2009.3.0.500" />
<meta name="D2HTheme" content="C3D v.138" />
</head>
<body onload="d2hOnLoadToolbar(event);" style="OVERFLOW: hidden; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent" relpart="../">
<script language="javascript" type="text/javascript">
//<![CDATA[



d2hTopicPreOpen();



d2hTrySyncTOC();







var prev = true;





var next = true;



if (typeof d2hInitMainThemeHandlers != "undefined")

    d2hInitMainThemeHandlers(prev, next);

d2hAdjustTopicBorders(document);    



if (typeof d2hLoadWindows != "undefined")

    d2hLoadWindows();

if (typeof d2hLoadNavUrls != "undefined")

    d2hLoadNavUrls();




//]]></script>

<div id="D2HTopicOuterBody" class="d2h_outer_topic" style="OVERFLOW: auto; HEIGHT: 100%; WIDTH: 100%; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent">
<div id="nsbanner" class="d2hNavigatorTopic">
<div id="TitleRow" class="d2h_main_titlerow" style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px">
<div style="DISPLAY: none"><a id="D2HPreviousAnchor" href="pointunits.htm"></a><a id="D2HNextAnchor" href="analogused1.htm"></a></div>
<script language="JavaScript" type="text/JavaScript">
//<![CDATA[

var USE_FLAT_BUTTONS = true;

var BTN_SELECTED = "";

var BTN_HOVER = "";

var IS_MODERN = false;

var HAS_MARGIN_CLASSIC_BORDER = false;


//]]></script>

<div id="ienav" class="d2h_main_ienav">
<table id="tblNavigator" class="D2HTopicToolbarOuter" cellspacing="0" cellpadding="0" width="100%" border="0">
  <tbody>
  <tr class="D2HTopicToolbarOuter">
    <td class="D2HTopicToolbar" align="left">
      <table class="D2HTopicToolbar" style="MARGIN-LEFT: 4px" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar">
          <td class="D2HTopicToolbar">
            <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
              <tbody>
              <tr class="D2HTopicToolbar">
                <td id="D2HBreadcrumbs" class="d2hCellTopic" nowrap="" caption=""><a target="right"><span class="D2HBreadcrumbsUnselected"><a class="d2h_breadcrumbsNormal" href="requiredparameters.htm">Required Parameters</a><span style="TEXT-DECORATION: none"> </span></span></a></td></tr></tbody></table></td>
          <td class="D2HTopicToolbar" nowrap=""><span class="D2HBreadcrumbsUnselected" style="TEXT-DECORATION: none"> </span></td></tr></tbody></table></td>
    <td class="D2HTopicToolbar" align="center">
      <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar"></tr></tbody></table></td>
    <td class="D2HTopicToolbar" align="right">
      <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar">
          <td class="D2HTopicToolbar" nowrap=""><span class="D2HEmailUnselected" style="TEXT-DECORATION: none"> </span></td>
          <td class="D2HTopicToolbar">
            <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
              <tbody>
              <tr class="D2HTopicToolbar">
                <td onclick="d2hCommand('D2HEmail')" id="D2HEmail" class="d2hCellTopic" nowrap=""><a href="javascript:void(0);"><span class="D2HEmailUnselected">Email<span style="TEXT-DECORATION: none"> </span></span></a></td></tr></tbody></table></td>
          <td class="D2HTopicToolbar" width="5" nowrap=""> </td></tr></tbody></table></td></tr></tbody></table></div></div>
<script language="javascript" type="text/javascript">
//<![CDATA[

if (typeof d2hProcessTopicNavForCSH != "undefined")

    d2hProcessTopicNavForCSH();


//]]></script>
</div>
<div id="nstext" class="d2h_main_nstext" style="PADDING-BOTTOM: 10px; PADDING-TOP: 5px; PADDING-LEFT: 22px; PADDING-RIGHT: 10px" valign="bottom">
<h2>The ANALOG group</h2>
<p class="MsoBodyText">The <span class="ParameterChar"><span style="FONT-SIZE: 9pt">ANALOG</span></span> <a onclick="return d2hpopup(event, this.href)" id="popup_103937" href="gloss_parameters.htm">parameters</a> group stores information about the 
analog data recorded within a C3D file.  As a result, the parameter <span class="ParameterChar"><span style="FONT-SIZE: 9pt">ANALOG:USED</span></span> 
should be stored in all C3D files even if the file does not contain any analog 
data.  C3D files that do not contain analog data should set the value of 
the USED parameter to zero.</p>
<p class="MsoBodyText">The original specification for analog data storage within 
the C3D file assumed that data values were sampled by an Analog to Digital 
Converter (<a onclick="return d2hpopup(event, this.href)" id="popup_103939" href="gloss_adc.htm">ADC</a>) and then written to the C3D file as binary 
samples.  The assumption was that the binary value would be stored in the 
C3D file as a signed 16-bit <a onclick="return d2hpopup(event, this.href)" id="popup_103938" href="gloss_integer.htm">integer</a> unless the C3D file used <a onclick="return d2hpopup(event, this.href)" id="popup_103936" href="gloss_floatingpoint1.htm">floating-point</a> format, in which case the 
signed 16-bit value would be converted to a floating-pint value before being 
written to the file.</p>
<p class="MsoBodyText">This method worked well for many years because the majority 
of analog data was sampled at 12-bit resolution and programmers implementing 
analog storage functions did not have to think too hard about the differences 
between storing signed offset, or unsigned offset data.  The sampled values 
obtained from the ADC could simply be written to the file, stored as a positive 
signed integer value, and any necessary scaling or format conversions could be 
handled by creating, and applying, the appropriate <span class="ParameterChar"><span style="FONT-SIZE: 9pt">OFFSET</span></span> and <span class="ParameterChar"><span style="FONT-SIZE: 9pt">SCALE</span></span> 
values.  It made no difference whether 12-bit or 14-bit data samples were 
considered to be a signed integer or an unsigned integer as all the possible 
unsigned values could be stored within the range of a signed 16-bit integer 
without any risk of integer overflow errors.</p>
<p class="MsoNormal" style="PAGE-BREAK-AFTER: avoid; MARGIN: 5.75pt 0pt 6pt 144pt"><img style="HEIGHT: 71.3pt; WIDTH: 342pt" border="0" src="../ImagesExt/image9_29.png" alt="" /></p>
<p class="MsoNormal" style="MARGIN: 3pt 0pt 8pt 144pt; tab-stops: 180.0pt 198.0pt"><i><span style="FONT-SIZE: 9pt">Figure </span></i><i><span style="FONT-SIZE: 9pt">31</span></i><i></i><i><span style="FONT-SIZE: 9pt"> - 
ADC ranges and resolutions</span></i></p>
<p class="MsoBodyText">This situation changed in two ways with the introduction of 
16-bit resolution Analog Data Convertor (ADC) samples:</p>
<p class="MsoBodyText" style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt; tab-stops: 180.0pt"><span style="FONT-FAMILY: Wingdings"> </span>The potential for integer overflow 
exists when the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">ANALOG:OFFSET</span></span> parameter is applied to 
16-bit resolution data..  This requires that all math operations on analog 
data be performed with at least 32-bit resolution to handle any potential 
overflow when large analog data values are encountered with any significant 
<span class="ParameterChar"><span style="FONT-SIZE: 9pt">OFFSET</span></span> 
values because any positive offset applied to the maximum sample value causes an 
overflow error, potentially inverting the data sample.</p>
<p class="MsoBodyText" style="MARGIN-LEFT: 36pt; TEXT-INDENT: -18pt; tab-stops: 180.0pt"><span style="FONT-FAMILY: Wingdings"> </span>The interpretation of the format used to 
store the <a onclick="return d2hpopup(event, this.href)" id="popup_103935" href="gloss_analogdatasample.htm">analog data sample</a> is significant.  
Before the introduction of 16-bit ADCs, most analog data samples contained 
12-bit data values with a range of 4096 discreet values, stored as positive 
numbers from 0 to 4095 as a signed 16-bit integer and converted to a scaled 
voltage measurement by the application of the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">ANALOG:SCALE</span></span> and <span class="ParameterChar"><span style="FONT-SIZE: 9pt">ANALOG:OFFSET</span></span> 
parameters associated with individual analog channels.  The introduction of 
16-bit analog data samples changed this and requires that the analog values are 
interpreted as signed integer values.</p>
<p class="MsoBodyText">The first C3D application to implement 16-bit analog data 
stored the analog data as unsigned 16-bit integer values, thus rendering the 
analog data unreadable to standard C3D applications that expect to read signed 
integers from the C3D file.  The programmer was unwilling to correct this, 
as the problems were only discovered after the software had been widely 
distributed and users started complaining that other C3D applications could not 
read the new format.</p>
<p class="MsoBodyText">In order to work around this problem two additional 
parameters (<span class="ParameterChar"><span style="FONT-SIZE: 9pt">ANALOG:FORMAT</span></span> and <span class="ParameterChar"><span style="FONT-SIZE: 9pt">ANALOG:BITS</span></span>) were 
added to the C3D file format description to document the <a onclick="return d2hpopup(event, this.href)" id="popup_103934" href="gloss_analogsampleformat.htm">analog sample format</a> and measurement 
resolution.  These two parameters are “optional” in the sense that they are 
unnecessary unless the analog values have been stored as unsigned integers. 
 Some applications will not read these parameters and will fail to read 
unsigned 16-bit analog data although in fact the additional <span class="ParameterChar"><span style="FONT-SIZE: 9pt">ANALOG:FORMAT</span></span> and 
<span class="ParameterChar"><span style="FONT-SIZE: 9pt">ANALOG:BITS</span></span> 
parameters are unnecessary as the choice of SIGNED or UNSIGNED data and the ADC 
or data resolution can be determined by simply interpreting the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">ANALOG:OFFSET</span></span> 
value.</p>
<p class="MsoBodyText" style="MARGIN-LEFT: 0pt">It is strongly recommended that 
anyone storing 16-bit analog data in integer format C3D files follow the <a onclick="return d2hpopup(event, this.href)" id="popup_103933" href="originalc3dformatdescription.htm">original C3D format description</a> and 
store their data using signed integers wherever possible.  Care is needed 
when writing code to convert between signed and unsigned formats or 
reading/writing all format variants.</p>
<p class="MsoBodyText">The parameters listed below must always be provided if the 
C3D file does contain analog data.  Other <span class="ParameterChar"><span style="FONT-SIZE: 9pt">ANALOG</span></span> parameters may be required by 
particular software applications – consult your manufacturer’s documentation for 
details of application specific parameters.</p>
<p class="RelatedHead">More:</p>
<p class="MsoNormal"><a style="TEXT-DECORATION: none" href="analogused1.htm"><img border="0" alt="" src="../button.gif" align="absMiddle" />ANALOG:USED</a></p>
<p class="MsoNormal"><a style="TEXT-DECORATION: none" href="analoglabels.htm"><img border="0" alt="" src="../button.gif" align="absMiddle" />ANALOG:LABELS</a></p>
<p class="MsoNormal"><a style="TEXT-DECORATION: none" href="analogdescriptions.htm"><img border="0" alt="" src="../button.gif" align="absMiddle" />ANALOG:DESCRIPTIONS</a></p>
<p class="MsoNormal"><a style="TEXT-DECORATION: none" href="analoggenscale.htm"><img border="0" alt="" src="../button.gif" align="absMiddle" />ANALOG:GEN_SCALE</a></p>
<p class="MsoNormal"><a style="TEXT-DECORATION: none" href="analogoffset.htm"><img border="0" alt="" src="../button.gif" align="absMiddle" />ANALOG:OFFSET</a></p>
<p class="MsoNormal"><a style="TEXT-DECORATION: none" href="analogunits.htm"><img border="0" alt="" src="../button.gif" align="absMiddle" />ANALOG:UNITS</a></p>
<p class="MsoNormal"><a style="TEXT-DECORATION: none" href="analogscale.htm"><img border="0" alt="" src="../button.gif" align="absMiddle" />ANALOG:SCALE</a></p>
<p class="MsoNormal"><a style="TEXT-DECORATION: none" href="analograte1.htm"><img border="0" alt="" src="../button.gif" align="absMiddle" />ANALOG:RATE</a></p>
<p class="MsoNormal"><a style="TEXT-DECORATION: none" href="analogformat.htm"><img border="0" alt="" src="../button.gif" align="absMiddle" />ANALOG:FORMAT</a></p>
<p class="MsoNormal"><a style="TEXT-DECORATION: none" href="analogbits.htm"><img border="0" alt="" src="../button.gif" align="absMiddle" />ANALOG:BITS</a></p></div></div></body></html>
