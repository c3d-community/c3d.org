<?xml version="1.0" encoding="utf-8"?>
<html><head><title>Integers and Bytes</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><link rel="stylesheet" type="text/css" href="../Theme/nav.css" /><link rel="stylesheet" type="text/css" href="../Theme/popupmenu.css" /><link rel="stylesheet" type="text/css" href="../Theme/lf.css" /><link rel="stylesheet" type="text/css" href="../LinksExt/C1H_HTML.css" /><link rel="stylesheet" type="text/css" href="../LinksExt/C3D User Guide.css" />
<script type="text/javascript">
//<![CDATA[



var _needIndentation = false;




//]]></script>

<script language="JavaScript" src="../linker.js" type="text/JavaScript"></script>

<script language="JavaScript" src="../special.js" type="text/JavaScript"></script>

<script language="JavaScript" src="../common.js" type="text/JavaScript"></script>

<meta name="Generator" content="ComponentOne Doc-To-Help v.2009.3.0.500" />
<meta name="D2HTheme" content="C3D v.138" />
</head>
<body onload="d2hOnLoadToolbar(event);" style="OVERFLOW: hidden; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent" relpart="../">
<script language="javascript" type="text/javascript">
//<![CDATA[



d2hTopicPreOpen();



d2hTrySyncTOC();







var prev = true;





var next = true;



if (typeof d2hInitMainThemeHandlers != "undefined")

    d2hInitMainThemeHandlers(prev, next);

d2hAdjustTopicBorders(document);    



if (typeof d2hLoadWindows != "undefined")

    d2hLoadWindows();

if (typeof d2hLoadNavUrls != "undefined")

    d2hLoadNavUrls();




//]]></script>

<div id="D2HTopicOuterBody" class="d2h_outer_topic" style="OVERFLOW: auto; HEIGHT: 100%; WIDTH: 100%; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent">
<div id="nsbanner" class="d2hNavigatorTopic">
<div id="TitleRow" class="d2h_main_titlerow" style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px">
<div style="DISPLAY: none"><a id="D2HPreviousAnchor" href="maintainingc3dframecountcompatibility1.htm"></a><a id="D2HNextAnchor" href="signednumbers.htm"></a></div>
<script language="JavaScript" type="text/JavaScript">
//<![CDATA[

var USE_FLAT_BUTTONS = true;

var BTN_SELECTED = "";

var BTN_HOVER = "";

var IS_MODERN = false;

var HAS_MARGIN_CLASSIC_BORDER = false;


//]]></script>

<div id="ienav" class="d2h_main_ienav">
<table id="tblNavigator" class="D2HTopicToolbarOuter" cellspacing="0" cellpadding="0" width="100%" border="0">
  <tbody>
  <tr class="D2HTopicToolbarOuter">
    <td class="D2HTopicToolbar" align="left">
      <table class="D2HTopicToolbar" style="MARGIN-LEFT: 4px" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar">
          <td class="D2HTopicToolbar">
            <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
              <tbody>
              <tr class="D2HTopicToolbar">
                <td id="D2HBreadcrumbs" class="d2hCellTopic" nowrap="" caption=""><a target="right"><span class="D2HBreadcrumbsUnselected"><a class="d2h_breadcrumbsNormal" href="appendix.htm">Appendix</a><span style="TEXT-DECORATION: none"> </span></span></a></td></tr></tbody></table></td>
          <td class="D2HTopicToolbar" nowrap=""><span class="D2HBreadcrumbsUnselected" style="TEXT-DECORATION: none"> </span></td></tr></tbody></table></td>
    <td class="D2HTopicToolbar" align="center">
      <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar"></tr></tbody></table></td>
    <td class="D2HTopicToolbar" align="right">
      <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar">
          <td class="D2HTopicToolbar" nowrap=""><span class="D2HEmailUnselected" style="TEXT-DECORATION: none"> </span></td>
          <td class="D2HTopicToolbar">
            <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
              <tbody>
              <tr class="D2HTopicToolbar">
                <td onclick="d2hCommand('D2HEmail')" id="D2HEmail" class="d2hCellTopic" nowrap=""><a href="javascript:void(0);"><span class="D2HEmailUnselected">Email<span style="TEXT-DECORATION: none"> </span></span></a></td></tr></tbody></table></td>
          <td class="D2HTopicToolbar" width="5" nowrap=""> </td></tr></tbody></table></td></tr></tbody></table></div></div>
<script language="javascript" type="text/javascript">
//<![CDATA[

if (typeof d2hProcessTopicNavForCSH != "undefined")

    d2hProcessTopicNavForCSH();


//]]></script>
</div>
<div id="nstext" class="d2h_main_nstext" style="PADDING-BOTTOM: 10px; PADDING-TOP: 5px; PADDING-LEFT: 22px; PADDING-RIGHT: 10px" valign="bottom">
<h2>Integers and Bytes</h2>
<p class="MsoBodyText">Some of the <a onclick="return d2hpopup(event, this.href)" id="popup_104146" href="gloss_parameters.htm">parameters</a> in C3D files store 
data values using 16-bit integers, while various parameter header values and <a onclick="return d2hpopup(event, this.href)" id="popup_104149" href="gloss_arrays.htm">arrays</a> use an 8-bit byte as an index.  In the 
original C3D specification all integers and <a onclick="return d2hpopup(event, this.href)" id="popup_104150" href="gloss_bytes.htm">bytes</a> in the parameter <a onclick="return d2hpopup(event, this.href)" id="popup_104148" href="gloss_section.htm">section</a> were <em><span style="FONT-FAMILY: &quot;Verdana&quot;,&quot;sans-serif&quot;">one's complement signed 
integers</span></em> with a range of –32767 to +32767, and all 8-bit integers 
were <em><span style="FONT-FAMILY: &quot;Verdana&quot;,&quot;sans-serif&quot;">one's complement 
signed bytes</span></em> with a range of –127 to +127.  Thus, in the 
original C3D format description every <a onclick="return d2hpopup(event, this.href)" id="popup_104147" href="gloss_integer.htm">integer</a> and byte in a parameter could store both 
positive and negative values and arrays could potentially have both positive and 
negative indexes.</p>
<p class="MsoBodyText">Some 16-bit integer parameters in a C3D file never need to 
store a negative value; for example the number of 3D points and the number of 
analog channels are always positive values.  In addition, arrays within the 
C3D file (which use an 8-bit index) never use a negative index – the array index 
values are always positive, while other parameters (<a onclick="return d2hpopup(event, this.href)" id="popup_104145" href="gloss_analogdatasample.htm">analog data sample</a> values, parameter 
indexes, group IDs, parameter IDs, and name lengths) require that the stored 
value is signed.</p>
<p class="MsoBodyText">The C3D format expects that all integer parameters that can 
never have a negative value are interpreted as unsigned values and that arrays 
use an unsigned 8-bit byte index which doubles the potential array storage 
available.  The stored binary format of the C3D files remains unchanged but 
the interpretation of the stored values in older C3D files is now occasionally 
dependent on the value that is being read.</p>
<p class="MsoBodyText" style="PAGE-BREAK-AFTER: avoid"><img style="HEIGHT: 156.8pt; WIDTH: 333pt" border="0" src="../ImagesExt/image9_60.png" alt="" /></p>
<p class="MsoCaption" style="MARGIN-LEFT: 0pt">Figure 48 – Binary and hex bytes as 
unsigned and one’s complement signed byte values.</p>
<p class="MsoBodyText" style="MARGIN-LEFT: 0pt">This change in the interpretation 
of the integer parameter values has the potential to cause problems for some 
older software applications that will read negative values for frame ranges and 
array indexes in larger files created with the new interpretation of the C3D 
standard but should not cause problems for modern applications.  The 
majority of older applications will fail to read the <a onclick="return d2hpopup(event, this.href)" id="popup_104144" href="newerc3dfiles.htm">newer C3D files</a> for other reasons.  While the 
larger arrays created by the use of unsigned bytes as array indexes can 
significantly increase the size of the parameter section, many modern 
applications use create larger parameter labels and store empty descriptions 
which can add a significant amount of empty space to the parameter 
storage.  Many of the older software applications, written using signed 
integers throughout, allocate fixed amounts of parameter storage (generally 
about 10kB) and any C3D file that uses unsigned array indexes, or poorly 
designed label names and descriptions, is very likely to overflow this 
allocation – usually with fatal results for the application.</p>
<p class="MsoBodyText">Since the discussion above does not change the C3D file 
format at a binary level there is no flag to indicate that a C3D file uses 
unsigned integers in the parameter section.  The use of unsigned integers 
can only be determined by finding unsigned values that exceed the signed range 
values in certain parameter or index values as shown in the table below.  
For example, if the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:FRAMES</span></span> value is greater than 32767 
then unsigned integers are used because a negative frame count (if read as a 
signed integer) cannot exist:</p>
<table class="MsoNormalTable" style="BORDER-TOP: medium none; BORDER-RIGHT: medium none; BORDER-COLLAPSE: collapse; BORDER-BOTTOM: medium none; MARGIN-LEFT: 0.4pt; BORDER-LEFT: medium none" cellspacing="0" cellpadding="0" width="457" border="1">
  <tbody>
  <tr style="HEIGHT: 7.2pt">
    <td style="BORDER-TOP: medium none; HEIGHT: 7.2pt; BORDER-RIGHT: medium none; WIDTH: 342.4pt; BACKGROUND: white; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: medium none; PADDING-RIGHT: 0pt" valign="top" width="457" colspan="3">
      <p class="MsoNormal" style="TEXT-ALIGN: center; MARGIN: 3pt 3.6pt 3pt 0pt" align="center"><b><span style="FONT-FAMILY: &quot;Arial&quot;,&quot;sans-serif&quot;"></span></b> </p></td></tr>
  <tr>
    <td style="BORDER-TOP: medium none; BORDER-RIGHT: navy 1pt solid; WIDTH: 126pt; BACKGROUND: #99ccff; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: navy 1pt solid; PADDING-RIGHT: 0pt" valign="top" width="168">
      <p class="MsoNormal" style="TEXT-ALIGN: center; MARGIN: 3pt 3.6pt 3pt 0pt" align="center"><b><span style="FONT-FAMILY: &quot;Arial&quot;,&quot;sans-serif&quot;">Parameters</span></b></p></td>
    <td style="BORDER-TOP: medium none; BORDER-RIGHT: navy 1pt solid; WIDTH: 108pt; BACKGROUND: #99ccff; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: medium none; PADDING-RIGHT: 0pt" valign="top" width="144">
      <p class="MsoNormal" style="TEXT-ALIGN: center; MARGIN: 3pt 3.6pt 3pt 0pt" align="center"><b><span style="FONT-FAMILY: &quot;Arial&quot;,&quot;sans-serif&quot;">Signed 
      Integer</span></b></p></td>
    <td style="BORDER-TOP: medium none; BORDER-RIGHT: navy 1pt solid; WIDTH: 108.4pt; BACKGROUND: #99ccff; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: medium none; PADDING-RIGHT: 0pt" valign="top" width="145">
      <p class="MsoNormal" style="TEXT-ALIGN: center; MARGIN: 3pt 3.6pt 3pt 0pt" align="center"><b><span style="FONT-FAMILY: &quot;Arial&quot;,&quot;sans-serif&quot;">Unsigned 
      Integer</span></b></p></td></tr>
  <tr>
    <td style="BORDER-TOP: medium none; BORDER-RIGHT: navy 1pt solid; WIDTH: 126pt; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: navy 1pt solid; PADDING-RIGHT: 0pt" width="168">
      <p class="MsoNormal" style="MARGIN: 2pt 3.6pt"><span style="FONT-SIZE: 9pt; FONT-FAMILY: &quot;Tahoma&quot;,&quot;sans-serif&quot;">POINT:FRAMES</span></p></td>
    <td style="BORDER-TOP: medium none; BORDER-RIGHT: navy 1pt solid; WIDTH: 108pt; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: medium none; PADDING-RIGHT: 0pt" valign="top" width="144">
      <p class="MsoNormal" style="TEXT-ALIGN: center; MARGIN: 2pt 3.6pt" align="center"><span style="FONT-SIZE: 9pt">Data value 1 to 
    32767</span></p></td>
    <td style="BORDER-TOP: medium none; BORDER-RIGHT: navy 1pt solid; WIDTH: 108.4pt; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: medium none; PADDING-RIGHT: 0pt" valign="top" width="145">
      <p class="MsoNormal" style="TEXT-ALIGN: center; MARGIN: 2pt 3.6pt" align="center"><span style="FONT-SIZE: 9pt">Data value 1 to 
    65535</span></p></td></tr>
  <tr>
    <td style="BORDER-TOP: medium none; BORDER-RIGHT: navy 1pt solid; WIDTH: 126pt; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: navy 1pt solid; PADDING-RIGHT: 0pt" width="168">
      <p class="MsoNormal" style="MARGIN: 2pt 3.6pt"><span style="FONT-SIZE: 9pt; FONT-FAMILY: &quot;Tahoma&quot;,&quot;sans-serif&quot;">POINT:LABELS</span></p></td>
    <td style="BORDER-TOP: medium none; BORDER-RIGHT: navy 1pt solid; WIDTH: 108pt; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: medium none; PADDING-RIGHT: 0pt" valign="top" width="144">
      <p class="MsoNormal" style="TEXT-ALIGN: center; MARGIN: 2pt 3.6pt" align="center"><span style="FONT-SIZE: 9pt">Array index 1 to 
    127</span></p></td>
    <td style="BORDER-TOP: medium none; BORDER-RIGHT: navy 1pt solid; WIDTH: 108.4pt; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: medium none; PADDING-RIGHT: 0pt" valign="top" width="145">
      <p class="MsoNormal" style="TEXT-ALIGN: center; MARGIN: 2pt 3.6pt" align="center"><span style="FONT-SIZE: 9pt">Array index 1 to 
    255</span></p></td></tr>
  <tr>
    <td style="BORDER-TOP: medium none; BORDER-RIGHT: navy 1pt solid; WIDTH: 126pt; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: navy 1pt solid; PADDING-RIGHT: 0pt" width="168">
      <p class="MsoNormal" style="MARGIN: 2pt 3.6pt"><span style="FONT-SIZE: 9pt; FONT-FAMILY: &quot;Tahoma&quot;,&quot;sans-serif&quot;">ANALOG:LABELS</span></p></td>
    <td style="BORDER-TOP: medium none; BORDER-RIGHT: navy 1pt solid; WIDTH: 108pt; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: medium none; PADDING-RIGHT: 0pt" valign="top" width="144">
      <p class="MsoNormal" style="TEXT-ALIGN: center; MARGIN: 2pt 3.6pt" align="center"><span style="FONT-SIZE: 9pt">Array index 1 to 
    127</span></p></td>
    <td style="BORDER-TOP: medium none; BORDER-RIGHT: navy 1pt solid; WIDTH: 108.4pt; BORDER-BOTTOM: navy 1pt solid; PADDING-BOTTOM: 0pt; PADDING-TOP: 0pt; PADDING-LEFT: 0pt; BORDER-LEFT: medium none; PADDING-RIGHT: 0pt" valign="top" width="145">
      <p class="MsoNormal" style="TEXT-ALIGN: center; MARGIN: 2pt 3.6pt" align="center"><span style="FONT-SIZE: 9pt">Array index 1 to 
    255</span></p></td></tr></tbody></table>
<p class="MsoNormal" style="MARGIN: 3pt 0pt 8pt 144pt; tab-stops: 180.0pt 198.0pt"><i><span style="FONT-SIZE: 9pt">Figure </span></i><i><span style="FONT-SIZE: 9pt">49</span></i><i></i><i><span style="FONT-SIZE: 9pt"> – 
Typical signed integer vs unsigned integer parameter changes</span></i></p>
<p class="MsoBodyText">It is worth pointing out at this stage that it is unlikely 
that most parameters will ever be required to exceed the ranges supported by the 
original signed value.  In general, the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:LABELS</span></span> and <span class="ParameterChar"><span style="FONT-SIZE: 9pt">ANALOG:LABELS</span></span> are 
the most likely to exceed the signed range of 127 array entries, while old 
applications may read the frame count stored in <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:FRAMES</span></span> as a negative integer value if 
the actual frame count is unsigned and exceeds 32767 resulting in an error.</p>
<p class="MsoBodyText">Other parameter entries could exceed the signed integer 
limits but it is unlikely to be seen in most environments.  While it is 
theoretically possible that almost all of the force plate parameters could take 
unsigned values, the only ones that are likely to be unsigned are the parameters 
<span class="ParameterChar"><span style="FONT-SIZE: 9pt">FORCE_PLATFORM:CHANNEL</span></span> which would have to 
use an unsigned array if the C3D file contained more than 127 analog 
channels.</p>
<p class="RelatedHead">More:</p>
<p class="MsoNormal"><a style="TEXT-DECORATION: none" href="signednumbers.htm"><img border="0" alt="" src="../button.gif" align="absMiddle" />Signed numbers</a></p>
<p class="MsoNormal"><a style="TEXT-DECORATION: none" href="unsignednumbers.htm"><img border="0" alt="" src="../button.gif" align="absMiddle" />Unsigned numbers</a></p></div></div></body></html>
