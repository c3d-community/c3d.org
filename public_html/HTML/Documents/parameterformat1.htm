<?xml version="1.0" encoding="utf-8"?>
<html><head><title>Parameter Format</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><link rel="stylesheet" type="text/css" href="../Theme/nav.css" /><link rel="stylesheet" type="text/css" href="../Theme/popupmenu.css" /><link rel="stylesheet" type="text/css" href="../Theme/lf.css" /><link rel="stylesheet" type="text/css" href="../LinksExt/C1H_HTML.css" /><link rel="stylesheet" type="text/css" href="../LinksExt/C3D User Guide.css" />
<script type="text/javascript">
//<![CDATA[



var _needIndentation = false;




//]]></script>

<script language="JavaScript" src="../linker.js" type="text/JavaScript"></script>

<script language="JavaScript" src="../special.js" type="text/JavaScript"></script>

<script language="JavaScript" src="../common.js" type="text/JavaScript"></script>

<meta name="Generator" content="ComponentOne Doc-To-Help v.2009.3.0.500" />
<meta name="D2HTheme" content="C3D v.138" />
</head>
<body onload="d2hOnLoadToolbar(event);" style="OVERFLOW: hidden; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent" relpart="../">
<script language="javascript" type="text/javascript">
//<![CDATA[



d2hTopicPreOpen();



d2hTrySyncTOC();







var prev = true;





var next = true;



if (typeof d2hInitMainThemeHandlers != "undefined")

    d2hInitMainThemeHandlers(prev, next);

d2hAdjustTopicBorders(document);    



if (typeof d2hLoadWindows != "undefined")

    d2hLoadWindows();

if (typeof d2hLoadNavUrls != "undefined")

    d2hLoadNavUrls();




//]]></script>

<div id="D2HTopicOuterBody" class="d2h_outer_topic" style="OVERFLOW: auto; HEIGHT: 100%; WIDTH: 100%; PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; MARGIN: 0px; PADDING-RIGHT: 0px; BACKGROUND-COLOR: transparent">
<div id="nsbanner" class="d2hNavigatorTopic">
<div id="TitleRow" class="d2h_main_titlerow" style="PADDING-BOTTOM: 0px; PADDING-TOP: 0px; PADDING-LEFT: 0px; PADDING-RIGHT: 0px">
<div style="DISPLAY: none"><a id="D2HPreviousAnchor" href="groupformat1.htm"></a><a id="D2HNextAnchor" href="parameterarrays1.htm"></a></div>
<script language="JavaScript" type="text/JavaScript">
//<![CDATA[

var USE_FLAT_BUTTONS = true;

var BTN_SELECTED = "";

var BTN_HOVER = "";

var IS_MODERN = false;

var HAS_MARGIN_CLASSIC_BORDER = false;


//]]></script>

<div id="ienav" class="d2h_main_ienav">
<table id="tblNavigator" class="D2HTopicToolbarOuter" cellspacing="0" cellpadding="0" width="100%" border="0">
  <tbody>
  <tr class="D2HTopicToolbarOuter">
    <td class="D2HTopicToolbar" align="left">
      <table class="D2HTopicToolbar" style="MARGIN-LEFT: 4px" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar">
          <td class="D2HTopicToolbar">
            <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
              <tbody>
              <tr class="D2HTopicToolbar">
                <td id="D2HBreadcrumbs" class="d2hCellTopic" nowrap="" caption=""><a target="right"><span class="D2HBreadcrumbsUnselected"><a class="d2h_breadcrumbsNormal" href="theparametersection.htm">The 
                  Parameter Section</a><span class="d2h_breadcrumbsLinkSeparator"> 
                  &gt; </span><a class="d2h_breadcrumbsNormal" href="c3dgroupsandparameters.htm">C3D Groups and 
                  Parameters</a><span style="TEXT-DECORATION: none"> </span></span></a></td></tr></tbody></table></td>
          <td class="D2HTopicToolbar" nowrap=""><span class="D2HBreadcrumbsUnselected" style="TEXT-DECORATION: none"> </span></td></tr></tbody></table></td>
    <td class="D2HTopicToolbar" align="center">
      <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar"></tr></tbody></table></td>
    <td class="D2HTopicToolbar" align="right">
      <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
        <tbody>
        <tr class="D2HTopicToolbar">
          <td class="D2HTopicToolbar" nowrap=""><span class="D2HEmailUnselected" style="TEXT-DECORATION: none"> </span></td>
          <td class="D2HTopicToolbar">
            <table class="D2HTopicToolbar" cellspacing="0" cellpadding="0">
              <tbody>
              <tr class="D2HTopicToolbar">
                <td onclick="d2hCommand('D2HEmail')" id="D2HEmail" class="d2hCellTopic" nowrap=""><a href="javascript:void(0);"><span class="D2HEmailUnselected">Email<span style="TEXT-DECORATION: none"> </span></span></a></td></tr></tbody></table></td>
          <td class="D2HTopicToolbar" width="5" nowrap=""> </td></tr></tbody></table></td></tr></tbody></table></div></div>
<script language="javascript" type="text/javascript">
//<![CDATA[

if (typeof d2hProcessTopicNavForCSH != "undefined")

    d2hProcessTopicNavForCSH();


//]]></script>
</div>
<div id="nstext" class="d2h_main_nstext" style="PADDING-BOTTOM: 10px; PADDING-TOP: 5px; PADDING-LEFT: 22px; PADDING-RIGHT: 10px" valign="bottom">
<h3>Parameter Format</h3>
<p class="MsoBodyText" style="MARGIN-LEFT: 0pt">The first byte in the parameter 
record is a one’s complement signed <a onclick="return d2hpopup(event, this.href)" id="popup_103737" href="gloss_integer.htm">integer</a> that stores the number of <a onclick="return d2hpopup(event, this.href)" id="popup_103736" href="gloss_characters.htm">characters</a> in the parameter name.  <a onclick="return d2hpopup(event, this.href)" id="popup_103732" href="thiscanbeapositiveornegativenumber.htm">This can be a positive or negative 
number</a>, a positive number indicates that the parameter is unlocked and any 
application can change it.  A negative count indicates that the parameter 
is locked and should not be changed without careful consideration of the 
consequences.  Parameter names can have from 1 to 127 <a onclick="return d2hpopup(event, this.href)" id="popup_103742" href="gloss_ascii.htm">ASCII</a> characters (using the 7-bit characters A-Z, 0-9 
and underscore) although four characters should generally be considered a 
minimum.  <a onclick="return d2hpopup(event, this.href)" id="popup_103741" href="gloss_utf8.htm">UTF-8</a> encoding is not permitted in parameter 
names.</p>
<p class="MsoBodyText">A locking mechanism is implemented to provide a mechanism 
to limit the ability of casual users to change <a onclick="return d2hpopup(event, this.href)" id="popup_103735" href="gloss_parameters.htm">parameters</a> using parameter examination and 
editing programs that might cause data corruption.  Any program that allows 
the user to modify parameters must respect the locking mechanism – editing may 
be permitted for applications that modify the C3D file structure but, for 
example, allowing a user to change the locked <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:RATE</span></span> parameter without resampling the 
data will corrupt the file.  The effectiveness of the locking mechanism 
depends on the degree to which locking is supported and the consistency with 
which applications that create C3D files apply the locking property.  The 
fact that a parameter has been locked by one application does not prevent any 
other application from changing it – locking simply provides a flag that may be 
utilized by other locking aware applications.</p>
<p class="MsoBodyText">For example an application that resamples the C3D point 
data will need to update the locked <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:RATE</span></span> parameter to record the new data 
rate but users occasionally think that they change the C3D file sample rate by 
simply editing the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:RATE</span></span> parameter - a simple edit that 
would corrupt the C3D file.  As a result it is strongly recommended that 
all applications do not normally allow users to change locked parameters – 
applications that permit the editing or modification of locked parameters should 
include a method of restricting this feature to prevent the casual user from 
accidentally corrupting their C3D data files.</p>
<p class="MsoBodyText">While it is recommended that all C3D applications respect 
the parameter lock flag and follow procedures to preserve C3D file contents from 
casual changes that might corrupt the contents, this is not a strict requirement 
in the C3D file format.  Many modern applications set the parameter lock 
flag incorrectly, either leaving every parameter unlocked or occasionally 
locking every parameter, even parameters like <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:DESCRIPTIONS</span></span> that users may often 
need to update during post-collection data analysis or processing.</p>
<p class="MsoBodyText" style="PAGE-BREAK-AFTER: avoid"><img style="HEIGHT: 262.5pt; WIDTH: 342pt" border="0" src="../ImagesExt/image9_13.png" alt="" /></p>
<p class="MsoCaption" style="MARGIN-LEFT: 0pt">Figure 15 - The C3D parameter 
format.</p>
<p class="MsoBodyText">The second byte in the parameter header is a signed integer 
that contains the parameter ID number – this is always a positive value between 
+1 and +127 and is used to link the parameter to a specific group.  A 
parameter with a positive ID value that matches a negative group ID number 
indicates that the parameter <em><span style="FONT-FAMILY: &quot;Verdana&quot;,&quot;sans-serif&quot;">belongs</span></em> to that 
group.  Note that the numeric value chosen for a group ID number is not 
fixed and may vary from one C3D file to another.  It is not required that 
group ID numbers are assigned in a contiguous sequence.  In the example 
below the ID number is 0x01h – indicating that this parameter belongs to the 
group described earlier, in fact this is the parameter <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:DATA_START</span></span> 
within this file.</p>
<p class="MsoBodyText" style="PAGE-BREAK-AFTER: avoid"><img style="HEIGHT: 70.5pt; WIDTH: 342pt" border="0" src="../ImagesExt/image9_14.png" alt="" /></p>
<p class="MsoCaption" style="MARGIN-LEFT: 0pt">Figure 16 - The DATA_START 
Parameter is locked and has a ten-character name.</p>
<p class="MsoBodyText">The string containing the parameter name starts at the 
third byte in the parameter record.  While parameter names can have from 1 
to 255 characters (using 7-bit ASCII character sets A-Z, 0-9 and the underscore 
“_” character) the choice of a new name should be concise although four (4) 
characters should generally be considered a minimum.</p>
<p class="MsoBodyText">An unsigned word pointer to the next parameter record 
structure follows the parameter name string unless this is the last parameter in 
the parameter <a onclick="return d2hpopup(event, this.href)" id="popup_103738" href="gloss_section.htm">section</a>.  The last parameter in the parameter 
section must always have a pointer value of 0x0000h to indicate that there are 
no more parameters following.</p>
<p class="MsoBodyText">A single byte follows which defines the parameter type; 
character, byte, integer or <a onclick="return d2hpopup(event, this.href)" id="popup_103734" href="gloss_floatingpoint1.htm">floating-point</a>.  Note 
that the interpretation of the data values is controlled by the processor type 
which is usually determined by the hardware that originally generated the C3D 
file.  These are <a onclick="return d2hpopup(event, this.href)" id="popup_103733" href="gloss_decintelandsgimips1.htm">DEC, Intel, and 
SGI/MIPS</a> formats.  All floating-point values in a given C3D file will 
use the same floating-point format as recorded in the fourth byte of the 
parameter record header.  Signed integer data can be stored in two 
different ways (little <a onclick="return d2hpopup(event, this.href)" id="popup_103739" href="gloss_endian.htm">endian</a> for DEC/Intel, and big endian 
for MIPS).</p>
<p class="MsoBodyText">The next byte in the parameter record is the number of 
dimensions in the parameter, which can be from zero (0) to a maximum of seven 
(7) dimensions.  A parameter with zero dimensions is a scalar.  If the 
parameter is a matrix then the actual parameter dimensions (e.g.  2 by 3, 6 
by 6 etc.,) are stored in the next two <a onclick="return d2hpopup(event, this.href)" id="popup_103740" href="gloss_bytes.htm">bytes</a>.  This is then followed by the parameter 
data itself.</p>
<p class="MsoBodyText">A single byte follows the pointer to the next parameter 
data structure – this stores the length of the parameter description string 
(0-255 characters), which immediately follows this byte.  The parameter 
description can contain mixed case characters and is generally used to provide a 
human-readable description of the parameter function.</p>
<p class="MsoBodyText" style="PAGE-BREAK-AFTER: avoid"><img style="HEIGHT: 113.3pt; WIDTH: 342pt" border="0" src="../ImagesExt/image9_15.png" alt="" /></p>
<p class="MsoCaption" style="MARGIN-LEFT: 0pt">Figure 17 - A locked integer 
parameter (USED = 36) with an accurate description.</p>
<p class="MsoBodyText">The parameter name is limited to a subset of ASCII 
characters, this is designed to be easily machine readable and should always be 
concise as illustrated above.  Analysis and processing of the data should 
always reference the name.  The description string is supported by all 
parameters and is supported to provide a human readable interface that support 
UTF-8 character sets.</p>
<p class="MsoBodyText">In the example below, the parameter RATE in the group POINT 
is stored as follows:</p>
<p class="MsoBodyText" style="PAGE-BREAK-AFTER: avoid"><img style="HEIGHT: 63.8pt; WIDTH: 342pt" border="0" src="../ImagesExt/image9_16.png" alt="" /></p>
<p class="MsoCaption" style="MARGIN-LEFT: 0pt">Figure 18 - A simple parameter 
record stored as a floating-point value.</p>
<p class="MsoBodyText">In this case, the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">RATE</span></span> parameter is correctly locked (first 
byte describing the length of the parameter name is negative) and it belongs to 
the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">GROUP</span></span> 
with a group ID of 1 (the second byte) which, in this file is the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT</span></span> group 
making this the <span class="ParameterChar"><span style="FONT-SIZE: 9pt">POINT:RATE</span></span> parameter.  The word 
following the parameter name describes the length of the rest of the parameter – 
effectively pointing to the start of the next parameter.  Following the 
parameter length word is a single byte that defines the storage format used by 
the parameter (in this case 4 specifying floating-point values) followed by a 0 
indicating that the parameter is a scalar value.  The following 4-byte word 
is a single floating-point value (a scalar), followed by a single byte that 
describes the length of the parameter description and then the description 
string which in this case, is the five character string “Video” – the next 
parameter (if any) will start immediately following this description string.</p>
<p class="MsoBodyText">While parameter name must be stored as ASCII characters to 
guarantee universal file access the parameter description, stored as UTF-8 
characters, enables the parameter to be presented to users in their local 
language and characters.</p>
<p class="MsoBodyText"> </p></div></div></body></html>
